(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class t{constructor(r){if(e(this,"data",void 0),t.exists)return t.instance;t.instance=this,t.exists=!0,this.data=r}getData(){return this.data}setData(e){this.data={...this.data,...e}}}e(t,"instance",void 0),e(t,"exists",void 0);const r=new t({isFillGeneralInfo:!1,numberWorkers:0,currentWorker:0,isModal:!1}),n={selectors:{btn:"MuiButton-root",btnLabel:"MuiButton-label",formLabel:"MuiFormLabel-root",formControlLabel:"MuiFormControlLabel-root",inputContainer:"MuiFormControl-root",input:"input",error:"Mui-error",modalContainer:"MuiDialog-root",modalFormBlock:"MuiDialogContent-root"},btnsText:{add:"add",cancel:"cancel"},regExpEmail:/^[A-Z0-9._%+-]+@[A-Z0-9-]+.+.[A-Z]{2,4}$/i,intervalCheckCloseModal:100,intervalCheckOpenModal:50},o=e=>e.querySelectorAll(`.${n.selectors.inputContainer}`),a=e=>e.querySelector(`${n.selectors.input}`),l=(e,t)=>{if(!e)return null;const r=e.split(" ").join("");if(!Number.isNaN(+r)){if(t){const e=+t.getAttribute("max");if(e&&e<Number(r))return e}return Number(r)}return null},s=(e,t,r=!1)=>{const o=a(e),s=(e=>{const t=(e=>e.split(" ").map(((e,t)=>0===t?e.charAt(0).toLowerCase()+e.slice(1):e.charAt(0).toUpperCase()+e.slice(1))).join(""))(e);switch(t){case"primaryPhone":return"firstPhone";case"businessDescription":return"desc";case"jobPosition":return"job";case"birthday":return"dob";case"workExperience(years)":return"experience";default:return t}})(((e,t)=>e.querySelector(`.${t}`))(e,n.selectors.formLabel).textContent);if("gender"===s)return void((e,t)=>{((e,t)=>e.querySelectorAll(`.${t}`))(e,n.selectors.formControlLabel).forEach((e=>{const r=a(e);r&&r.value.toLowerCase()===t&&r.click()}))})(e,t.gender);let c=null;c=((e,t,r)=>{switch(e){case"firstPhone":case"secondaryPhone":return l(t);case"experience":return l(t,r);case"email":return(e=>e&&n.regExpEmail.test(e)?e:null)(t);case"dob":return(e=>{if(!e)return null;const t=new Date(e),r=t.getDate()<10?`0${t.getDate()}`:t.getDate();return`${t.getMonth()+1<10?`0${t.getMonth()+1}`:t.getMonth()+1}/${r}/${t.getFullYear()}`})(t);case"desc":return((e,t)=>e?e.slice(0,t):null)(t,Number(r.getAttribute("maxLength")));default:return t}})(s,r?o.value:t[s],o),((e,t)=>{const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyDescriptor(r,"value").set;e.focus(),n.call(e,t),e.dispatchEvent(new Event("input",{bubbles:!0})),e.blur()})(o,c)},c=(e,t)=>{const r=e.querySelectorAll(`.${n.selectors.btn}`);let o=null;return r.forEach((e=>{e.querySelector(`.${n.selectors.btnLabel}`).textContent.toLowerCase()===t&&(o=e)})),o},i=e=>e.querySelector(`.${n.selectors.modalContainer}`),u=()=>{setTimeout((()=>{r.setData({isModal:!1}),b()}),0)},d=e=>{const t=i(document);if(o(t).forEach((t=>s(t,e,!0))),r.setData({isModal:!1}),!t.querySelectorAll(`.${n.selectors.error}`).length){c(t,n.btnsText.add).removeEventListener("click",d.bind(null,e));const r=setInterval((()=>{i(document)||(clearInterval(r),b())}),n.intervalCheckCloseModal)}},b=()=>{const e=data;r.setData({numberWorkers:e.workers.length});const t=r.getData();t.isFillGeneralInfo?t.numberWorkers>t.currentWorker&&(((e,t)=>{r.setData({isModal:!0}),c(e,n.btnsText.add).click();const a=i(e),l=setInterval((()=>{const e=(e=>e.querySelector(`.${n.selectors.modalFormBlock}`))(a);if(e){clearInterval(l),o(e).forEach((e=>{s(e,t)}));const r=c(a,n.btnsText.add);r.click(),r.addEventListener("click",d.bind(null,t),!1),c(a,n.btnsText.cancel).addEventListener("click",u,!0)}}),n.intervalCheckOpenModal)})(document,e.workers[t.currentWorker]),r.setData({currentWorker:t.currentWorker+=1})):((e,t)=>{o(e).forEach((e=>s(e,t))),r.setData({isFillGeneralInfo:!0}),b()})(document,e)};window.addEventListener("load",(()=>{const e=document.querySelector(".MuiFab-root"),t=()=>{b(),e.removeEventListener("click",t)};e.addEventListener("click",t)}))})();